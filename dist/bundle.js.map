{"version":3,"sources":["webpack:///webpack/bootstrap cb12b45d8683d7de1173","webpack:///./src/textoverlay.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/main.js","webpack:///./src/utils/flatten.js","webpack:///./src/utils/getStyle.js","webpack:///./src/utils/setStyle.js"],"names":["css","wrapper","overflow","overlay","color","position","top","width","textarea","background","outline","height","margin","properties","wrapperSize","overlayBorder","merge","base","target","forEach","borderWidth","parseInt","property","match","padding","paddingWidth","Textoverlay","parentElement","document","createElement","className","Object","assign","insertBefore","removeChild","appendChild","borders","strategies","Error","origStyle","keys","createWrapper","createOverlay","textareaBorderTop","handleInput","bind","handleScroll","handleResize","addEventListener","observer","MutationObserver","observe","attributes","attributeFilter","wrapperDisplay","render","removeEventListener","disconnect","remove","skipUpdate","update","sync","firstChild","computeOverlayNodes","node","scrollTop","props","reduce","ns","strategy","highlight","map","Text","text","textContent","resp","prevIndex","lastIndex","exec","push","substr","str","length","span","cloneNode","value","global","flatten","array","acc","element","Array","e","getStyle","cssStyleDeclaration","window","getComputedStyle","getPropertyValue","setStyle","style","setProperty","key"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cb12b45d8683d7de1173","/**\n * textoverlay.js - Simple decorator for textarea elements\n *\n * @author Yuku Takahashi <taka84u9@gmil.com>\n * @flow\n */\n\nimport flatten from \"./utils/flatten\";\nimport setStyle from \"./utils/setStyle\";\nimport getStyle from \"./utils/getStyle\";\n\nconst css = {\n  wrapper: {\n    \"box-sizing\": \"border-box\",\n    overflow: \"hidden\",\n  },\n  overlay: {\n    \"box-sizing\": \"border-box\",\n    color: \"transparent\",\n    position: \"absolute\",\n    \"white-space\": \"pre-wrap\",\n    \"word-wrap\": \"break-word\",\n    overflow: \"hidden\",\n    top: \"0px\",\n    width: \"100%\",\n  },\n  textarea: {\n    background: \"transparent\",\n    \"box-sizing\": \"border-box\",\n    outline: \"none\",\n    position: \"relative\",\n    height: \"100%\",\n    width: \"100%\",\n    margin: \"0px\",\n  },\n};\n\nconst properties = {\n  wrapper: [\n    \"background\",\n    \"display\",\n    \"margin\",\n  ],\n  wrapperSize: [\n    \"height\",\n    \"width\",\n  ],\n  overlay: [\n    \"font-family\",\n    \"font-size\",\n    \"font-weight\",\n    \"line-height\",\n    \"padding\",\n  ],\n  overlayBorder: [\n    \"border-bottom-width\",\n    \"border-left-width\",\n    \"border-right-width\",\n    \"border-top-width\",\n  ],\n};\n\nfunction merge(base: { [string]: string }, target: { [string]: string }) {\n  properties.overlayBorder.forEach(property => {\n    const borderWidth = parseInt(target[property], 10);\n    const match = property.match(/top|bottom|left|right/);\n    if (match) {\n      const padding = `padding-${match[0]}`;\n      const paddingWidth = parseInt(base[padding], 10);\n      base[padding] = `${paddingWidth + borderWidth}px`;\n    }\n  });\n  return base;\n}\n\nexport type Strategy = {\n  match: RegExp;\n  css: { [string]: string };\n};\n\nexport default class Textoverlay {\n  origStyle: { [string]: string };\n  strategies: Strategy[];\n  textareaBorderTop: number;\n  observer: MutationObserver;\n  wrapperDisplay: string;\n\n  overlay: HTMLDivElement;\n  textarea: HTMLTextAreaElement;\n  wrapper: HTMLDivElement;\n\n  handleInput: () => void;\n  handleResize: () => void;\n  handleScroll: () => void;\n\n  static createWrapper(textarea: HTMLTextAreaElement, parentElement: Element) {\n    const position = getStyle(textarea, [\"position\"]).position;\n    const wrapper = document.createElement(\"div\");\n    wrapper.className = \"textoverlay-wrapper\";\n    setStyle(wrapper, Object.assign({}, getStyle(textarea, properties.wrapper), css.wrapper, {\n      position: position === \"static\" ? \"relative\" : position,\n    }));\n    parentElement.insertBefore(wrapper, textarea);\n    parentElement.removeChild(textarea);\n    wrapper.appendChild(textarea);\n    return wrapper;\n  }\n\n  static createOverlay(textarea: HTMLTextAreaElement, wrapper: HTMLDivElement) {\n    const overlay = document.createElement(\"div\");\n    overlay.className = \"textoverlay\";\n    const borders = getStyle(textarea, properties.overlayBorder);\n\n    setStyle(overlay, Object.assign({}, css.overlay, merge(getStyle(textarea, properties.overlay), borders)));\n    wrapper.insertBefore(overlay, textarea);\n    return overlay;\n  }\n\n  constructor(textarea: HTMLTextAreaElement, strategies: Strategy[]) {\n    const parentElement = textarea.parentElement;\n    if (!parentElement) {\n      throw new Error(\"textarea must in DOM tree\");\n    }\n\n    this.origStyle = getStyle(textarea, Object.keys(css.textarea));\n\n    this.wrapper = Textoverlay.createWrapper(textarea, parentElement);\n    this.overlay = Textoverlay.createOverlay(textarea, this.wrapper);\n\n    setStyle(textarea, css.textarea);\n    this.textarea = textarea;\n\n    this.strategies = strategies;\n    this.textareaBorderTop = parseInt(getStyle(textarea, [\"border-top-width\"])[\"border-top-width\"], 10);\n\n    this.handleInput = this.handleInput.bind(this);\n    this.handleScroll = this.handleScroll.bind(this);\n    this.handleResize = this.handleResize.bind(this);\n    this.textarea.addEventListener(\"input\", this.handleInput);\n    this.textarea.addEventListener(\"scroll\", this.handleScroll);\n    this.observer = new MutationObserver(this.handleResize);\n    this.observer.observe(this.textarea, {\n      attributes: true,\n      attributeFilter: [\"style\"],\n    });\n\n    this.wrapperDisplay = getStyle(this.wrapper, [\"display\"])[\"display\"];\n    this.render();\n  }\n\n  destroy() {\n    this.textarea.removeEventListener(\"input\", this.handleInput);\n    this.textarea.removeEventListener(\"scroll\", this.handleScroll);\n    this.observer.disconnect();\n\n    setStyle(this.textarea, this.origStyle);\n\n    this.overlay.remove();\n    this.textarea.remove();\n    const parentElement = this.wrapper.parentElement;\n    if (parentElement) {\n      parentElement.insertBefore(this.textarea, this.wrapper);\n      this.wrapper.remove();\n    }\n  }\n\n  /**\n   * Public API to update and sync textoverlay\n   */\n  render(skipUpdate: boolean = false) {\n    if (!skipUpdate) {\n      this.update();\n    }\n    this.sync();\n  }\n\n  /**\n   * Update contents of textoverlay\n   *\n   * @private\n   */\n  update() {\n    // Remove all child nodes from overlay.\n    while (this.overlay.firstChild) {\n      this.overlay.removeChild(this.overlay.firstChild);\n    }\n\n    this.computeOverlayNodes().forEach(node => this.overlay.appendChild(node));\n  }\n\n  /**\n   * Sync scroll and size of textarea\n   *\n   * @private\n   */\n  sync() {\n    setStyle(this.overlay, {\n      top: `${this.textareaBorderTop - this.textarea.scrollTop}px`,\n    });\n    const props = this.wrapperDisplay === \"block\" ? [\"height\"] : [\"height\", \"width\"];\n    setStyle(this.wrapper, getStyle(this.textarea, props));\n  }\n\n  /**\n   * @private\n   */\n  computeOverlayNodes(): Node[] {\n    return this.strategies.reduce((ns: Node[], strategy) => {\n      const highlight = document.createElement(\"span\");\n      setStyle(highlight, strategy.css);\n      return flatten(ns.map(node => {\n        if (!(node instanceof Text)) { return node; }\n        const text = node.textContent;\n        const resp = [];\n        for (let prevIndex = strategy.match.lastIndex = 0;; prevIndex = strategy.match.lastIndex) {\n          const match = strategy.match.exec(text);\n          if (!match) {\n            resp.push(new Text(text.substr(prevIndex)));\n            break;\n          }\n          const str = match[0];\n          resp.push(new Text(text.substr(prevIndex, strategy.match.lastIndex - prevIndex - str.length)));\n          const span = highlight.cloneNode();\n          span.textContent = str;\n          resp.push(span);\n        }\n        return resp;\n      }));\n    }, [new Text(this.textarea.value)]);\n  }\n\n  handleInput() {\n    this.render(); \n  }\n\n  handleScroll() {\n    this.render(true); \n  }\n\n  handleResize() {\n    this.render(true); \n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/textoverlay.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 1\n// module chunks = 0","import Textoverlay from \"./textoverlay\";\n\nglobal.Textoverlay = Textoverlay;\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","// @flow\n\n/**\n * Function for flattening a nested array.\n */\nexport default function flatten(array: Array<*>) {\n  return array.reduce((acc, element) => {\n    if (element instanceof Array) {\n      flatten(element).forEach(e => acc.push(e));\n    } else {\n      acc.push(element);\n    }\n    return acc;\n  }, []);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/flatten.js","// @flow\n\n/**\n * Get style of the given properties\n */\nexport default function getStyle(element: HTMLElement, properties: string[]): { [string]: string } {\n  const cssStyleDeclaration = window.getComputedStyle(element);\n  return properties.reduce((acc, property) => {\n    acc[property] = cssStyleDeclaration.getPropertyValue(property);\n    return acc;\n  }, {});\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/getStyle.js","// @flow\n\n/**\n * Set style to the element.\n */\nexport default function setStyle(element: HTMLElement, style: { [string]: string }) {\n  Object.keys(style).forEach(key => {\n    element.style.setProperty(key, style[key]);\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/setStyle.js"],"sourceRoot":""}